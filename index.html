<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8" />

	<!-- Makes the app responsive on mobile devices -->
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />

	<!-- Page title (shown in browser tab) -->
	<title>üê∑ StingyLog</title>

	<!-- PWA -->
  	<link rel="manifest" href="manifest.json" />

	<!-- Theme color used for browser UI and Android status bar -->
	<meta name="theme-color" content="#111111" />

	<!-- iOS PWA support -->
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

	<!-- App name shown under the icon on iOS home screen -->
	<meta name="apple-mobile-web-app-title" content="StingyLog">
	<!-- iOS app icon -->
	<link rel="apple-touch-icon" sizes="180x180" href="imgs/piggy.png">

	<!-- Content Security Policy -->
	<meta http-equiv="Content-Security-Policy"
		content="
			default-src 'self';
			script-src 'self';
			style-src 'self' 'unsafe-inline';
			img-src 'self' data:;
			connect-src 'self';
		" />

	<!-- Main stylesheet -->
	<link rel="stylesheet" href="style.css" />
</head>

<body>
	<!-- <header>
		<h1>üê∑ StingyLog</h1>
	</header> -->

	<main class="app">

		<!-- Tabs for switching views -->
		<div class="tabs">
			<button id="tabCalendar" class="active">Calendar</button>
			<button id="tabStats">Stats</button>
		</div>

		<!-- Calendar view -->
		<section id="calendarView">
			<!-- Calendar container -->
			<div class="calendar">
				<!-- Calendar header with month navigation -->
				<div class="calendar-header">
					<button id="prevMonth">‚Äπ</button> <!-- Button to go to previous month -->
					<span id="monthLabel" role="button"></span> <!-- Displays current month -->
					<button id="nextMonth">‚Ä∫</button> <!-- Button to go to next month -->
				</div>
				<!-- Calendar grid for days -->
				<div class="calendar-grid" id="calendarGrid"></div>

				<div class="month-grid hidden" id="monthGrid"></div>
			</div>

			<!-- Expense entry card -->
			<div class="card">
				<input
					id="amount"
					type="number"
					inputmode="decimal"
					placeholder="Amount" 
				/>
				<input
					id="note"
					type="text"
					placeholder="What was it for?" 
				/>
				<button id="addBtn">Add Expense</button> <!-- Button to add expense -->
				<button id="zeroBtn" class="secondary">No Spend</button>
			</div>

			<!-- Display total expenses -->
			<h2 id="total">Total: 0</h2>

			<!-- List of added expenses -->
			<ul id="list"></ul>
		</section>

		<!-- Statistics view section (hidden by default) -->
		<section id="statsView" hidden>
			<!-- Filters and budget input -->
			<div class="card">
				<label>
					Time range
					<select id="range">
						<option value="7">Last 7 days</option>
						<option value="14">Last 14 days</option>
						<option value="30">Last 30 days</option>
						<option value="custom">Custom</option>
					</select>
				</label>

				<!-- Custom date range inputs, shown only when 'Custom' is selected -->
				<label id="customRange" hidden>
					From
					<input type="date" id="fromDate" />
					To
					<input type="date" id="toDate" />
				</label>

				<label>
					Budget
					<input type="number" id="budget" placeholder="Optional" /> <!-- Optional budget input -->
				</label>
			</div>

			<!-- Statistics summary card -->
			<div class="card">
				<h2 id="statsTotal">Total: 0</h2> <!-- Total expenses for selected range -->
				<div class="progress">
					<div id="progressBar"></div> <!-- Visual progress bar for budget usage -->
				</div>
				<p id="statsPercent"></p> <!-- Percentage of budget used -->
			</div>
		</section>
	</main>

	<!-- Main JavaScript file -->
	<script src="app.js"></script>

	<!-- Service Worker registration for PWA support -->
	<script>
	if ('serviceWorker' in navigator) {
		window.addEventListener('load', async () => {
		try {
			await navigator.serviceWorker.register('./sw.js');
		} catch (err) {
			console.error('SW registration failed', err);
		}
		});
	}
	</script>
</body>
</html>
